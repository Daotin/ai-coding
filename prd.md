# AI Coding ç¬”è®°è‡ªåŠ¨åŒ–ç›®å½•æ›´æ–°é¡¹ç›® - PRD

## 1. èƒŒæ™¯

å½“å‰é¡¹ç›®æ˜¯ä¸€ä¸ª GitHub ä»“åº“ï¼Œç”¨äºè®°å½•ä¸ªäºº AI Coding çš„å­¦ä¹ å¿ƒå¾—ä¸ç¬”è®°ã€‚æ‰€æœ‰ç¬”è®°å‡ä»¥ GitHub Issue çš„å½¢å¼åˆ›å»ºå’Œç®¡ç†ã€‚ä¸ºäº†æ–¹ä¾¿å¿«é€ŸæŸ¥é˜…å’Œå¯¼èˆªï¼Œ`README.md` æ–‡ä»¶è¢«ç”¨ä½œä¸€ä¸ªä¸­å¤®ç›®å½•ï¼Œæ‰‹åŠ¨ç»´æŠ¤ç€æ‰€æœ‰ Issue çš„åˆ—è¡¨ã€‚

**ç—›ç‚¹ï¼š** æ¯æ¬¡åˆ›å»ºã€ä¿®æ”¹æˆ–å…³é—­ Issue æ—¶ï¼Œéƒ½éœ€è¦æ‰‹åŠ¨æ›´æ–° `README.md` æ–‡ä»¶æ¥åŒæ­¥çŠ¶æ€ï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸ç¹çã€è€—æ—¶ä¸”å®¹æ˜“å‡ºé”™ï¼Œé™ä½äº†è®°å½•ç¬”è®°çš„æ•ˆç‡å’Œç§¯ææ€§ã€‚

## 2. é¡¹ç›®ç›®æ ‡

**æ ¸å¿ƒç›®æ ‡ï¼š** å®ç°å®Œå…¨è‡ªåŠ¨åŒ–çš„ `README.md` ç›®å½•æ›´æ–°æœºåˆ¶ã€‚

é€šè¿‡å¼•å…¥ GitHub Actionsï¼Œæˆ‘ä»¬æ—¨åœ¨å»ºç«‹ä¸€ä¸ªæ— äººå€¼å®ˆçš„å·¥ä½œæµã€‚è¯¥å·¥ä½œæµèƒ½å¤Ÿå®æ—¶å“åº” Issue çš„å˜åŒ–ï¼Œè‡ªåŠ¨æŠ“å–ã€åˆ†ç±»å’Œæ ¼å¼åŒ– Issue åˆ—è¡¨ï¼Œå¹¶å°†å…¶æ›´æ–°åˆ° `README.md` æ–‡ä»¶ä¸­ï¼Œä»è€Œå½»åº•å‘Šåˆ«æ‰‹åŠ¨ç»´æŠ¤ã€‚

## 3. éœ€æ±‚è¯¦è¿°

### 3.1 è§¦å‘æ¡ä»¶

å·¥ä½œæµå¿…é¡»åœ¨ä»¥ä¸‹ä»»ä¸€äº‹ä»¶å‘ç”Ÿæ—¶è¢«è‡ªåŠ¨è§¦å‘ï¼Œä»¥ç¡®ä¿ `README.md` çš„å†…å®¹ä¸ Issue çš„å®é™…çŠ¶æ€ä¿æŒ 100% åŒæ­¥ï¼š

- **åˆ›å»º Issue (`opened`)**: å½“ä¸€ç¯‡æ–°ç¬”è®°ï¼ˆIssueï¼‰è¢«åˆ›å»ºæ—¶ã€‚
- **ç¼–è¾‘ Issue (`edited`)**: å½“ä¸€ç¯‡ç¬”è®°çš„æ ‡é¢˜è¢«ä¿®æ”¹æ—¶ã€‚
- **å…³é—­ Issue (`closed`)**: å½“ä¸€ç¯‡ç¬”è®°è¢«æ ‡è®°ä¸ºå®Œæˆæˆ–åºŸå¼ƒæ—¶ã€‚
- **æ·»åŠ æ ‡ç­¾ (`labeled`)**: å½“ä¸ºä¸€ç¯‡ç¬”è®°æ·»åŠ åˆ†ç±»æ ‡ç­¾æ—¶ã€‚
- **ç§»é™¤æ ‡ç­¾ (`unlabeled`)**: å½“ä»ä¸€ç¯‡ç¬”è®°ä¸Šç§»é™¤åˆ†ç±»æ ‡ç­¾æ—¶ã€‚

### 3.2 æ ¸å¿ƒé€»è¾‘

å·¥ä½œæµçš„æ ¸å¿ƒä»»åŠ¡æ˜¯ç”Ÿæˆä¸€ä¸ªæŒ‰æ ‡ç­¾åˆ†ç±»çš„ã€ç»“æ„åŒ–çš„ Issue åˆ—è¡¨ã€‚

- **æ•°æ®æº**: åªæŠ“å–çŠ¶æ€ä¸º `open` (å¼€å¯) çš„ Issueã€‚å·²å…³é—­çš„ Issue å°†è‡ªåŠ¨ä»ç›®å½•ä¸­ç§»é™¤ã€‚
- **åˆ†ç±»è§„åˆ™**:
  - Issue åˆ—è¡¨å¿…é¡»æŒ‰ç…§å…¶ **æ ‡ç­¾ (Label)** è¿›è¡Œåˆ†ç»„ã€‚
  - æ¯ä¸ªæ ‡ç­¾åå°†ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åˆ†ç±»æ ‡é¢˜ã€‚
  - **å¤šæ ‡ç­¾å¤„ç†**: å¦‚æœä¸€ä¸ª Issue æ‹¥æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œå®ƒåº”è¯¥åŒæ—¶å‡ºç°åœ¨æ‰€æœ‰å¯¹åº”æ ‡ç­¾çš„åˆ†ç±»ä¸‹ã€‚
  - **æ— æ ‡ç­¾å¤„ç†**: å¦‚æœä¸€ä¸ª Issue æ²¡æœ‰ä»»ä½•æ ‡ç­¾ï¼Œå®ƒåº”è¯¥è¢«å½’å…¥ä¸€ä¸ªåä¸º `æœªåˆ†ç±»` çš„é»˜è®¤åˆ†ç»„ä¸­ã€‚
- **æ’åºè§„åˆ™**: åˆ†ç±»æ ‡é¢˜ï¼ˆæ ‡ç­¾ï¼‰ä¹‹é—´ï¼Œä»¥åŠæ¯ä¸ªåˆ†ç±»ä¸‹çš„ Issue åˆ—è¡¨ï¼Œå¯ä»¥æŒ‰åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´æˆ–å­—æ¯é¡ºåºæ’åºï¼ˆé»˜è®¤ä¸º API è¿”å›é¡ºåºï¼‰ã€‚

### 3.3 è¾“å‡ºæ ¼å¼

æ›´æ–°åçš„ `README.md` å†…å®¹å¿…é¡»éµå¾ªä»¥ä¸‹æ ¼å¼ï¼Œä»¥ä¿è¯å¯è¯»æ€§å’Œç¾è§‚æ€§ï¼š

- **å ä½ç¬¦**: è„šæœ¬é€šè¿‡è¯†åˆ« `README.md` æ–‡ä»¶ä¸­é¢„è®¾çš„ä¸€å¯¹æ³¨é‡Š `<!-- ISSUES-LIST:START -->` å’Œ `<!-- ISSUES-LIST:END -->` æ¥ç¡®å®šæ›´æ–°åŒºåŸŸã€‚è„šæœ¬åªä¼šä¿®æ”¹è¿™å¯¹æ³¨é‡Šä¹‹é—´çš„å†…å®¹ï¼Œç¡®ä¿æ–‡ä»¶å…¶ä»–éƒ¨åˆ†ä¸å—å½±å“ã€‚
- **åˆ†ç±»æ ‡é¢˜**: æ¯ä¸ªæ ‡ç­¾åˆ†ç±»ä½¿ç”¨ Markdown çš„äºŒçº§æ ‡é¢˜ï¼ˆ`##`ï¼‰è¿›è¡Œå±•ç¤ºï¼Œå¹¶é™„å¸¦ä¸€ä¸ª Emoji å›¾æ ‡ï¼Œä¾‹å¦‚ï¼š`## ğŸ·ï¸ AI Tools`ã€‚
- **Issue åˆ—è¡¨**: åœ¨æ¯ä¸ªåˆ†ç±»æ ‡é¢˜ä¸‹ï¼Œä½¿ç”¨æ— åºåˆ—è¡¨ï¼ˆ`*`ï¼‰å±•ç¤ºè¯¥åˆ†ç±»çš„ Issueã€‚æ¯ä¸€é¡¹çš„æ ¼å¼ä¸ºï¼š`* [Issueæ ‡é¢˜](Issueé“¾æ¥)`ï¼Œä¾‹å¦‚ï¼š`* [å¦‚ä½•ä½¿ç”¨ Copilot Chat](https://github.com/user/repo/issues/123)`ã€‚

## 4. å®ç°æ–¹æ¡ˆ

æˆ‘ä»¬å°†é‡‡ç”¨ **GitHub Actions + è‡ªå®šä¹‰ Node.js è„šæœ¬** çš„æ–¹æ¡ˆï¼Œä»¥å®ç°éœ€æ±‚çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚

### 4.1 æŠ€æœ¯é€‰å‹

- **è‡ªåŠ¨åŒ–å¼•æ“**: GitHub Actions
- **è„šæœ¬è¯­è¨€**: Node.js (v20)
- **GitHub API äº¤äº’åº“**: `@octokit/rest` (å®˜æ–¹æ¨è)

### 4.2 æ–‡ä»¶ç»“æ„

æ‚¨éœ€è¦åœ¨ä»“åº“ä¸­åˆ›å»ºä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ï¼š

```
ai-coding/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â””â”€â”€ update-readme.yml  # GitHub Actions å·¥ä½œæµé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ scripts/
â”‚       â””â”€â”€ update-readme.js   # æ ¸å¿ƒé€»è¾‘å¤„ç†è„šæœ¬
â”œâ”€â”€ node_modules/              # (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ package.json               # Node.js é¡¹ç›®ä¾èµ–ç®¡ç†
â”œâ”€â”€ package-lock.json          # (è‡ªåŠ¨ç”Ÿæˆ)
â””â”€â”€ README.md                  # ç¬”è®°ç›®å½•æ–‡ä»¶
```

### 4.3 å·¥ä½œæµ (`update-readme.yml`)

æ­¤æ–‡ä»¶å®šä¹‰äº†è‡ªåŠ¨åŒ–çš„è§¦å‘æ—¶æœºå’Œæ‰§è¡Œæ­¥éª¤ã€‚

1.  **è§¦å‘å™¨**: ç›‘å¬ `issues` äº‹ä»¶çš„ `opened`, `edited`, `closed`, `labeled`, `unlabeled` ç±»å‹ã€‚
2.  **æƒé™**: æˆäºˆå·¥ä½œæµè¯»å†™ `contents` å’Œè¯»å– `issues` çš„æƒé™ã€‚
3.  **æ­¥éª¤**:
    a. **æ£€å‡ºä»£ç **: ä½¿ç”¨ `actions/checkout@v4` å°†ä»“åº“ä»£ç æ‹‰å–åˆ°è¿è¡Œç¯å¢ƒä¸­ã€‚
    b. **è®¾ç½® Node.js ç¯å¢ƒ**: ä½¿ç”¨ `actions/setup-node@v4` å‡†å¤‡ Node.js è¿è¡Œç¯å¢ƒã€‚
    c. **å®‰è£…ä¾èµ–**: è¿è¡Œ `npm install` æ¥å®‰è£… `package.json` ä¸­å®šä¹‰çš„ `@octokit/rest` åº“ã€‚
    d. **æ‰§è¡Œè„šæœ¬**: è¿è¡Œ `node ./.github/scripts/update-readme.js`ï¼Œå¹¶é€šè¿‡ç¯å¢ƒå˜é‡ `GITHUB_TOKEN` ä¼ å…¥è®¤è¯ä»¤ç‰Œã€‚
    e. **æäº¤å˜æ›´**: æ£€æŸ¥ `README.md` æ–‡ä»¶æ˜¯å¦æœ‰å®é™…å˜æ›´ã€‚å¦‚æœæœ‰ï¼Œåˆ™è‡ªåŠ¨ `commit` å’Œ `push` åˆ°ä¸»åˆ†æ”¯ã€‚

### 4.4 æ ¸å¿ƒè„šæœ¬ (`update-readme.js`)

æ­¤è„šæœ¬æ˜¯å®ç°æ‰€æœ‰æ ¸å¿ƒé€»è¾‘çš„â€œå¤§è„‘â€ã€‚

1.  **åˆå§‹åŒ–**: å¼•å…¥æ‰€éœ€æ¨¡å— (`fs`, `@octokit/rest`)ï¼Œå¹¶ä½¿ç”¨ `GITHUB_TOKEN` åˆå§‹åŒ– Octokit å®¢æˆ·ç«¯ã€‚
2.  **è·å–æ•°æ®**: è°ƒç”¨ GitHub APIï¼Œè·å–ä»“åº“ä¸­æ‰€æœ‰çŠ¶æ€ä¸º `open` çš„ Issue åŠå…¶æ ‡ç­¾ä¿¡æ¯ã€‚
3.  **å¤„ç†æ•°æ®**:
    - åˆ›å»ºä¸€ä¸ª `Map` å¯¹è±¡ç”¨äºå­˜æ”¾åˆ†ç±»ç»“æœï¼Œé”®ä¸ºæ ‡ç­¾åï¼Œå€¼ä¸º Issue å¯¹è±¡æ•°ç»„ã€‚
    - éå†æ‰€æœ‰ Issueï¼Œæ ¹æ®å…¶æ ‡ç­¾å°†å…¶æ”¾å…¥ `Map` ä¸­å¯¹åº”çš„æ•°ç»„ã€‚è‹¥æ— æ ‡ç­¾ï¼Œåˆ™æ”¾å…¥åä¸º `æœªåˆ†ç±»` çš„é”®ä¸­ã€‚
4.  **ç”Ÿæˆ Markdown**:
    - éå† `Map`ï¼Œå°†å…¶è½¬æ¢ä¸ºæ ¼å¼åŒ–çš„ Markdown å­—ç¬¦ä¸²ã€‚
5.  **æ›´æ–°æ–‡ä»¶**:
    - è¯»å– `README.md` çš„åŸå§‹å†…å®¹ã€‚
    - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å®šä½ `<!-- ISSUES-LIST:START -->` å’Œ `<!-- ISSUES-LIST:END -->` ä¹‹é—´çš„åŒºåŸŸã€‚
    - å°†è¯¥åŒºåŸŸæ›¿æ¢ä¸ºæ–°ç”Ÿæˆçš„ Markdown å­—ç¬¦ä¸²ã€‚
    - å°†æ›´æ–°åçš„å†…å®¹å†™å› `README.md` æ–‡ä»¶ã€‚

## 5. ç”¨æˆ·æ‰‹åŠ¨æ“ä½œæŒ‡å—

**æ‚¨éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼Œåœ¨æ‚¨çš„ `ai-coding` ä»“åº“ä¸­å®Œæˆåˆå§‹è®¾ç½®ã€‚**

### æ­¥éª¤ 1: åœ¨ `README.md` ä¸­æ·»åŠ å ä½ç¬¦

æ‰“å¼€ `README.md` æ–‡ä»¶ï¼Œåœ¨æ‚¨å¸Œæœ›å±•ç¤º Issue åˆ—è¡¨çš„ä½ç½®ï¼ˆä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªä¸»æ ‡é¢˜ä¸‹ï¼‰ï¼Œæ·»åŠ ä»¥ä¸‹ä¸¤è¡Œæ³¨é‡Šã€‚å·¥ä½œæµå°†åœ¨è¿™é‡Œè‡ªåŠ¨ç”Ÿæˆå†…å®¹ã€‚

```markdown
### ğŸ“š AI Coding ç¬”è®°ç›®å½•

<!-- ISSUES-LIST:START -->
<!-- æ­¤åˆ—è¡¨ç”± GitHub Actions è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹ -->
<!-- ISSUES-LIST:END -->
```

### æ­¥éª¤ 2: åˆ›å»º `package.json` æ–‡ä»¶

åœ¨æ‚¨çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `package.json` æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å‘Šè¯‰ Node.js æˆ‘ä»¬çš„è„šæœ¬éœ€è¦å“ªäº›ä¾èµ–ã€‚

**æ–‡ä»¶å:** `package.json`
**å†…å®¹:**

```json
{
  "name": "ai-coding-readme-updater",
  "version": "1.0.0",
  "description": "Updates README with a list of issues categorized by labels.",
  "main": ".github/scripts/update-readme.js",
  "scripts": {
    "start": "node .github/scripts/update-readme.js"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "@octokit/rest": "^20.0.2"
  }
}
```

### æ­¥éª¤ 3: åˆ›å»º GitHub Actions å·¥ä½œæµæ–‡ä»¶

1.  åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»º `.github` æ–‡ä»¶å¤¹ã€‚
2.  åœ¨ `.github` æ–‡ä»¶å¤¹å†…ï¼Œåˆ›å»º `workflows` æ–‡ä»¶å¤¹ã€‚
3.  åœ¨ `workflows` æ–‡ä»¶å¤¹å†…ï¼Œåˆ›å»º `update-readme.yml` æ–‡ä»¶ã€‚

**æ–‡ä»¶å:** `.github/workflows/update-readme.yml`
**å†…å®¹:**

```yaml
name: Update README with Issues by Label

on:
  issues:
    types: [opened, edited, closed, labeled, unlabeled]

jobs:
  update-readme:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      issues: read

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: npm install

      - name: Update README section
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          REPO_OWNER: ${{ github.repository_owner }}
          REPO_NAME: ${{ github.event.repository.name }}
        run: node ./.github/scripts/update-readme.js

      - name: Commit and push if changed
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add README.md
          if ! git diff --staged --quiet; then
            git commit -m "docs(readme): auto-update issue list by label"
            git push
          else
            echo "No changes to commit."
          fi
```

### æ­¥éª¤ 4: åˆ›å»ºæ ¸å¿ƒé€»è¾‘è„šæœ¬

1.  åœ¨ `.github` æ–‡ä»¶å¤¹å†…ï¼Œåˆ›å»º `scripts` æ–‡ä»¶å¤¹ã€‚
2.  åœ¨ `scripts` æ–‡ä»¶å¤¹å†…ï¼Œåˆ›å»º `update-readme.js` æ–‡ä»¶ã€‚

**æ–‡ä»¶å:** `.github/scripts/update-readme.js`
**å†…å®¹:**

```javascript
const fs = require('fs');
const { Octokit } = require('@octokit/rest');

const octokit = new Octokit({ auth: process.env.GITHUB_TOKEN });

const owner = process.env.REPO_OWNER;
const repo = process.env.REPO_NAME;
const readmePath = 'README.md';
const placeholderStart = '<!-- ISSUES-LIST:START -->';
const placeholderEnd = '<!-- ISSUES-LIST:END -->';

async function main() {
  console.log(`Fetching open issues for ${owner}/${repo}...`);

  const { data: issues } = await octokit.paginate(octokit.issues.listForRepo, {
    owner,
    repo,
    state: 'open',
  });

  console.log(`Found ${issues.length} open issues.`);

  const issuesByLabel = new Map();

  for (const issue of issues) {
    if (issue.pull_request) continue; // Skip pull requests

    const labels = issue.labels.map((label) => label.name);

    if (labels.length === 0) {
      if (!issuesByLabel.has('æœªåˆ†ç±»')) {
        issuesByLabel.set('æœªåˆ†ç±»', []);
      }
      issuesByLabel.get('æœªåˆ†ç±»').push(issue);
    } else {
      for (const label of labels) {
        if (!issuesByLabel.has(label)) {
          issuesByLabel.set(label, []);
        }
        issuesByLabel.get(label).push(issue);
      }
    }
  }

  let newContent = '';
  // Sort labels alphabetically for consistent order
  const sortedLabels = Array.from(issuesByLabel.keys()).sort();

  for (const label of sortedLabels) {
    newContent += `\n## ğŸ·ï¸ ${label}\n\n`;
    const sortedIssues = issuesByLabel.get(label).sort((a, b) => a.number - b.number); // Sort issues by number
    for (const issue of sortedIssues) {
      newContent += `* [#${issue.number}](${issue.html_url}) ${issue.title}\n`;
    }
  }

  const readmeContent = fs.readFileSync(readmePath, 'utf-8');
  const placeholderStartIndex = readmeContent.indexOf(placeholderStart);
  const placeholderEndIndex = readmeContent.indexOf(placeholderEnd);

  if (placeholderStartIndex === -1 || placeholderEndIndex === -1) {
    console.error('Placeholders not found in README.md. Exiting.');
    return;
  }

  const contentBefore = readmeContent.substring(0, placeholderStartIndex + placeholderStart.length);
  const contentAfter = readmeContent.substring(placeholderEndIndex);

  const updatedReadme = `${contentBefore}\n${newContent}\n${contentAfter}`;

  fs.writeFileSync(readmePath, updatedReadme);
  console.log('README.md has been updated successfully.');
}

main().catch((error) => {
  console.error('An error occurred:', error);
  process.exit(1);
});
```

### æ­¥éª¤ 5: æäº¤æ‰€æœ‰å˜æ›´

å°†æ‚¨åˆšåˆšåˆ›å»ºå’Œä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶ (`README.md`, `package.json`, `.github/workflows/update-readme.yml`, `.github/scripts/update-readme.js`) æäº¤åˆ°æ‚¨çš„ GitHub ä»“åº“ã€‚

```bash
git add .
git commit -m "feat: setup auto-update README workflow"
git push
```

å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæ‚¨çš„è‡ªåŠ¨åŒ–å·¥ä½œæµå°±é…ç½®å®Œæ¯•äº†ã€‚ä»ç°åœ¨å¼€å§‹ï¼Œæ¯å½“æ‚¨åœ¨ GitHub ä¸Šåˆ›å»ºã€ç¼–è¾‘ã€å…³é—­æˆ–æ ‡è®° Issue æ—¶ï¼Œæœºå™¨äººéƒ½ä¼šåœ¨å‡ åˆ†é’Ÿå†…è‡ªåŠ¨æ›´æ–°æ‚¨çš„ `README.md` æ–‡ä»¶ã€‚
